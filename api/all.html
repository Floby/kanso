<html>
  <head>
    <title>API - all - Kanso Framework</title>
    <link rel="stylesheet" href="http://yandex.st/highlightjs/5.16/styles/github.min.css">
    <link rel="stylesheet" href="../css/kanso.css" />
    <!--[if IE]>
      <link rel="stylesheet" href="../css/kanso_ie.css" />
    <![endif]-->
  </head>
  <body>
    <div id="topbar">
      <a id="logo" href="../index.html">
        <img src="../images/kanso_small.png" />
      </a>
      <a id="site" href="../index.html">Framework</a>
      <div id="rightmenu">
        <ul id="topmenu">
          <li>
            <a href="../index.html">About</a>
          </li>
          <li>
            <a href="../guides/index.html">Guides</a>
          </li>
          <li>
            <a href="../community.html">Community</a>
          </li>
          <li class="active">
            <a href="../api/index.html">API</a>
          </li>
          <li>
            <a href="https://github.com/caolan/kanso">Code</a>
          </li>
          <li>
            <a href="../download.html">Download</a>
          </li>
        </ul>
        <!--
        <ul id="sessionmenu">
          <li><a href="#">Create Account</a></li>
          <li><a href="#">Sign In</a></li>
        </ul>
        -->
      </div>
    </div>

    <div id="content">
      <h1>Kanso API Documentation</h1><p><a href="index.html">Index</a> | <a href="all.html">View on single page</a></p><div class="toc"><h2>Table of Contents</h2><ul><li><a href="#actions">actions</a><ul></ul></li><li><a href="#cookies">cookies</a><ul><li><a href="#cookies.readBrowserCookies">readBrowserCookies()</a></li><li><a href="#cookies.readBrowserCookie">readBrowserCookie(name)</a></li><li><a href="#cookies.cookieString">cookieString(req, opt)</a></li><li><a href="#cookies.setBrowserCookie">setBrowserCookie(req, opt)</a></li><li><a href="#cookies.setResponseCookie">setResponseCookie(req, res, opt)</a></li></ul></li><li><a href="#core">core</a><ul><li><a href="#core.rewriteGroups">rewriteGroups(pattern, url)</a></li><li><a href="#core.rewriteSplat">rewriteSplat(pattern, url)</a></li><li><a href="#core.matchURL">matchURL(method, url)</a></li><li><a href="#core.replaceGroups">replaceGroups(val, groups, splat)</a></li><li><a href="#core.createRequest">createRequest(method, url, data, match, callback)</a></li><li><a href="#core.runShowBrowser">runShowBrowser(req, name, docid, callback)</a></li><li><a href="#core.parseResponse">parseResponse(req, res)</a></li><li><a href="#core.runShow">runShow(fn, doc, req)</a></li><li><a href="#core.runUpdateBrowser">runUpdateBrowser(req, name, docid, callback)</a></li><li><a href="#core.runUpdate">runUpdate(fn, doc, req)</a></li><li><a href="#core.createHead">createHead(data)</a></li><li><a href="#core.runListBrowser">runListBrowser(req, name, view, callback)</a></li><li><a href="#core.runList">runList(fn, head, req)</a></li><li><a href="#core.handle">handle(method, url, data)</a></li><li><a href="#core.setURL">setURL(method, url, data)</a></li><li><a href="#core.getURL">getURL()</a></li><li><a href="#core.sameOrigin">sameOrigin(a, b)</a></li><li><a href="#core.appPath">appPath(p)</a></li><li><a href="#core.isAppURL">isAppURL(url)</a></li></ul></li><li><a href="#db">db</a><ul><li><a href="#db.encode">encode(str)</a></li><li><a href="#db.request">request(options, callback)</a></li><li><a href="#db.getRewrite">getRewrite(path, [q], callback)</a></li><li><a href="#db.getDoc">getDoc(id, [q, options], callback)</a></li><li><a href="#db.saveDoc">saveDoc(doc, [options], callback)</a></li><li><a href="#db.removeDoc">removeDoc(doc, [options], callback)</a></li><li><a href="#db.getView">getView(view, [q], callback)</a></li><li><a href="#db.getList">getList(list, view, [q], callback)</a></li><li><a href="#db.getShow">getShow(show, docid, [q], callback)</a></li><li><a href="#db.all">all([q], callback)</a></li><li><a href="#db.stringifyQuery">stringifyQuery(query)</a></li><li><a href="#db.newUUID">newUUID(cacheNum, callback)</a></li><li><a href="#db.createDatabase">createDatabase(name, callback)</a></li><li><a href="#db.deleteDatabase">deleteDatabase(name, callback)</a></li><li><a href="#db.getReplication">getReplication(id, callback)</a></li><li><a href="#db.startReplication">startReplication(options, callback)</a></li><li><a href="#db.waitReplication">waitReplication(doc, [options, state_function], callback)</a></li><li><a href="#db.stopReplication">stopReplication(doc, callback, [options])</a></li><li><a href="#db.deleteUser">deleteUser(username, callback)</a></li><li><a href="#db.getDesignDoc">getDesignDoc(name, callback, no_cache)</a></li></ul></li><li><a href="#events">events</a><ul><li><a href="#events.on">on(name, listener)</a></li><li><a href="#events.once">once(name, listener)</a></li><li><a href="#events.emit">emit(name, [...])</a></li><li><a href="#events.listeners">listeners(name)</a></li><li><a href="#events.removeAllListeners">removeAllListeners(name)</a></li><li><a href="#events.removeListener">removeListener(name, listener)</a></li></ul></li><li><a href="#fields">fields</a><ul><li><a href="#fields.Field">Field</a></li><li><a href="#fields.Field.parse">Field.parse(raw)</a></li><li><a href="#fields.Field.isEmpty">Field.isEmpty(value, raw)</a></li><li><a href="#fields.Field.validate">Field.validate(doc, value, raw)</a></li><li><a href="#fields.Field.authorize">Field.authorize(newDoc, oldDoc, newVal, oldVal, userCtx)</a></li><li><a href="#fields.Embedded">Embedded</a></li><li><a href="#fields.Embedded.isEmpty">Embedded.isEmpty(value, raw)</a></li><li><a href="#fields.Embedded.validate">Embedded.validate(doc, value, raw)</a></li><li><a href="#fields.Embedded.authorize">Embedded.authorize(newDoc, oldDoc, newVal, oldVal, user)</a></li><li><a href="#fields.EmbeddedList">EmbeddedList</a></li><li><a href="#fields.EmbeddedList.isEmpty">EmbeddedList.isEmpty(value, raw)</a></li><li><a href="#fields.EmbeddedList.missingIDs">EmbeddedList.missingIDs(list)</a></li><li><a href="#fields.EmbeddedList.duplicateIDs">EmbeddedList.duplicateIDs(list)</a></li><li><a href="#fields.EmbeddedList.validate">EmbeddedList.validate(doc, value, raw)</a></li><li><a href="#fields.EmbeddedList.authorize">EmbeddedList.authorize(nDoc, oDoc, nVal, oVal, user)</a></li><li><a href="#fields.string">string([options])</a></li><li><a href="#fields.number">number([options])</a></li><li><a href="#fields.boolean">boolean([options])</a></li><li><a href="#fields.url">url([options])</a></li><li><a href="#fields.email">email([options])</a></li><li><a href="#fields.creator">creator([options])</a></li><li><a href="#fields.createdTime">createdTime([options])</a></li><li><a href="#fields.choice">choice([options])</a></li><li><a href="#fields.numberChoice">numberChoice([options])</a></li><li><a href="#fields.embed">embed([options])</a></li><li><a href="#fields.embedList">embedList([options])</a></li><li><a href="#fields.array">array([options])</a></li><li><a href="#fields.numberArray">numberArray([options])</a></li></ul></li><li><a href="#fieldset">fieldset</a><ul><li><a href="#fieldset.createDefaults">createDefaults(fields, req)</a></li><li><a href="#fieldset.validateField">validateField(field, doc, value, raw, path)</a></li><li><a href="#fieldset.validate">validate(fields, doc, values, raw, path, extra)</a></li><li><a href="#fieldset.authField">authField(f, nDoc, oDoc, nVal, oVal, user, path)</a></li><li><a href="#fieldset.authFieldSet">authFieldSet(f, nDoc, oDoc, nVal, oVal, user, path)</a></li></ul></li><li><a href="#flashmessages">flashmessages</a><ul><li><a href="#flashmessages.readRequestCookie">readRequestCookie(req)</a></li><li><a href="#flashmessages.readBrowserCookie">readBrowserCookie()</a></li><li><a href="#flashmessages.updateRequest">updateRequest(req)</a></li><li><a href="#flashmessages.getMessages">getMessages(req)</a></li><li><a href="#flashmessages.getOutgoingMessages">getOutgoingMessages(req)</a></li><li><a href="#flashmessages.updateResponse">updateResponse(req, res)</a></li><li><a href="#flashmessages.createMessage">createMessage(req, msg)</a></li><li><a href="#flashmessages.setBrowserCookie">setBrowserCookie(req, messages)</a></li><li><a href="#flashmessages.addMessage">addMessage(req, msg)</a></li></ul></li><li><a href="#forms">forms</a><ul><li><a href="#forms.Form">Form(fields | type, [doc])</a></li><li><a href="#forms.override">override(excludes, field_subset, fields, doc_a, doc_b, path)</a></li><li><a href="#forms.Form.validate">Form.validate(req)</a></li><li><a href="#forms.Form.isValid">Form.isValid()</a></li><li><a href="#forms.Form.toHTML">Form.toHTML(req, [RendererClass])</a></li><li><a href="#forms.Form.renderFields">Form.renderFields(renderer, fields, values, raw, err, path)</a></li><li><a href="#forms.formValuesToTree">formValuesToTree(form)</a></li><li><a href="#forms.parseRaw">parseRaw(fields, raw)</a></li></ul></li><li><a href="#path">path</a><ul><li><a href="#path.join">join(path, [...])</a></li><li><a href="#path.normalizeArray">normalizeArray(parts, [keepBlanks])</a></li><li><a href="#path.normalize">normalize(path, [keepBlanks])</a></li><li><a href="#path.dirname">dirname(path)</a></li><li><a href="#path.basename">basename(path, ext)</a></li><li><a href="#path.extname">extname(path)</a></li></ul></li><li><a href="#permissions">permissions</a><ul><li><a href="#permissions.matchUsername">matchUsername()</a></li><li><a href="#permissions.hasRole">hasRole(role)</a></li><li><a href="#permissions.fieldUneditable">fieldUneditable()</a></li><li><a href="#permissions.usernameMatchesField">usernameMatchesField(path)</a></li><li><a href="#permissions.loggedIn">loggedIn()</a></li><li><a href="#permissions.all">all(perms)</a></li><li><a href="#permissions.any">any(perms)</a></li><li><a href="#permissions.inherit">inherit(type)</a></li></ul></li><li><a href="#querystring">querystring</a><ul><li><a href="#querystring.unescape">unescape(str)</a></li><li><a href="#querystring.escape">escape(str)</a></li><li><a href="#querystring.stringify">stringify(obj, [sep, eq, name])</a></li><li><a href="#querystring.decode">decode(qs, [sep, eq])</a></li></ul></li><li><a href="#render">render</a><ul><li><a href="#render.errorHTML">errorHTML(errors)</a></li><li><a href="#render.labelText">labelText(field, name)</a></li><li><a href="#render.labelHTML">labelHTML(field, name, id)</a></li><li><a href="#render.descriptionHTML">descriptionHTML(obj)</a></li><li><a href="#render.hintHTML">hintHTML(obj)</a></li><li><a href="#render.classes">classes(field, errors)</a></li><li><a href="#render.defaultRenderer">defaultRenderer()</a></li><li><a href="#render.table">table</a></li></ul></li><li><a href="#sanitize">sanitize</a><ul><li><a href="#sanitize.escapeHtml">escapeHtml(s)</a></li><li><a href="#sanitize.escapeJavascriptString">escapeJavascriptString(s)</a></li><li><a href="#sanitize.escapeXmlCharacterData">escapeXmlCharacterData(s)</a></li><li><a href="#sanitize.generateDomIdentifier">generateDomIdentifier(s)</a></li><li><a href="#sanitize.generateDomName">generateDomName(s)</a></li></ul></li><li><a href="#session">session</a><ul><li><a href="#session.fakeRequest">fakeRequest(userCtx, callback)</a></li><li><a href="#session.sessionChange">sessionChange(userCtx, callback)</a></li><li><a href="#session.logout">logout(callback)</a></li><li><a href="#session.login">login(username, password, callback)</a></li><li><a href="#session.info">info(callback)</a></li><li><a href="#session.userDb">userDb(callback)</a></li><li><a href="#session.signup">signup(username, password, callback)</a></li></ul></li><li><a href="#settings">settings</a><ul></ul></li><li><a href="#sha1">sha1</a><ul><li><a href="#sha1.hex">hex(s)</a></li><li><a href="#sha1.base64">base64(s)</a></li><li><a href="#sha1.str">str(s)</a></li><li><a href="#sha1.hex_hmac">hex_hmac(key, data)</a></li><li><a href="#sha1.base64_hmac">base64_hmac(key, data)</a></li><li><a href="#sha1.str_hmac">str_hmac(key, data)</a></li></ul></li><li><a href="#templates">templates</a><ul><li><a href="#templates.render">render(name, req, context)</a></li></ul></li><li><a href="#types">types</a><ul><li><a href="#types.Type">Type(name, options)</a></li><li><a href="#types.Type.validate">Type.validate(doc, rawDoc)</a></li><li><a href="#types.Type.authorize">Type.authorize(nDoc, oDoc, user)</a></li><li><a href="#types.Type.authorizeTypeLevel">Type.authorizeTypeLevel(nDoc, oDoc, user)</a></li><li><a href="#types.Type.create">Type.create(userCtx, callback)</a></li><li><a href="#types.validate_doc_update">validate_doc_update(types, newDoc, oldDoc, userCtx)</a></li></ul></li><li><a href="#underscore">underscore</a><ul></ul></li><li><a href="#url">url</a><ul><li><a href="#url.parse">parse(url, [parseQueryString, slashesDenoteHost])</a></li><li><a href="#url.format">format(obj)</a></li><li><a href="#url.resolve">resolve(source, relative)</a></li></ul></li><li><a href="#utils">utils</a><ul><li><a href="#utils.getBaseURL">getBaseURL(req)</a></li><li><a href="#utils.getPropertyPath">getPropertyPath(obj, path)</a></li><li><a href="#utils.setPropertyPath">setPropertyPath(obj, path, val)</a></li><li><a href="#utils.escapeHTML">escapeHTML(s)</a></li><li><a href="#utils.parseCSV">parseCSV(csvString)</a></li><li><a href="#utils.redirect">redirect(req, url)</a></li><li><a href="#utils.isSubPath">isSubPath(a, b)</a></li><li><a href="#utils.titleize">titleize(str)</a></li><li><a href="#utils.bindContext">bindContext(context, closure)</a></li></ul></li><li><a href="#validators">validators</a><ul><li><a href="#validators.min">min(min)</a></li><li><a href="#validators.max">max(max)</a></li><li><a href="#validators.range">range(min, max)</a></li><li><a href="#validators.minlength">minlength(val)</a></li><li><a href="#validators.maxlength">maxlength(val)</a></li><li><a href="#validators.rangelength">rangelength(min, max)</a></li><li><a href="#validators.regexp">regexp(re, message)</a></li><li><a href="#validators.email">email()</a></li><li><a href="#validators.url">url()</a></li><li><a href="#validators.missingIDs">missingIDs()</a></li></ul></li><li><a href="#widgets">widgets</a><ul><li><a href="#widgets.Widget">Widget(type, [options])</a></li><li><a href="#widgets.Widget.toHTML">Widget.toHTML(name, value, raw, field, options)</a></li><li><a href="#widgets.Widget.clientInit">Widget.clientInit(path, value, raw, field, options)</a></li><li><a href="#widgets.Widget.updateName">Widget.updateName(path)</a></li><li><a href="#widgets.Widget.updateValue">Widget.updateValue(elt, path, value, options)</a></li><li><a href="#widgets.Widget.getValue">Widget.getValue(elt, path, options)</a></li><li><a href="#widgets.Widget.validate">Widget.validate(elt, path, options)</a></li><li><a href="#widgets.text">text([options])</a></li><li><a href="#widgets.password">password([options])</a></li><li><a href="#widgets.hidden">hidden([options])</a></li><li><a href="#widgets.textarea">textarea([options])</a></li><li><a href="#widgets.checkbox">checkbox([options])</a></li><li><a href="#widgets.select">select([options])</a></li><li><a href="#widgets.computed">computed([options])</a></li><li><a href="#widgets.creator">creator([options])</a></li><li><a href="#widgets.embedded">embedded([options])</a></li><li><a href="#widgets.defaultEmbedded">defaultEmbedded([options])</a></li><li><a href="#widgets.embedForm">embedForm([options])</a></li></ul></li></ul></div><h2 id="actions">actions</h2><p>Implementation of widget actions. These are procedures
that can be referenced by widgets to present/collect information,
manipulate the DOM, or otherwise affect the application state
when a widget is acted upon.</p><h2 id="cookies">cookies</h2><p>Functions related to the manipulation and reading of cookies.</p><h3 id="cookies.readBrowserCookies">readBrowserCookies()</h3><p>Read cookies currently stored in the browser, returning an object
keyed by cookie name.</p><div class="returns"><strong>Returns: </strong><span class="type">Object</span></div><h3 id="cookies.readBrowserCookie">readBrowserCookie(name)</h3><p>Reads browser cookies and returned the value of the named cookie.</p><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="cookies.cookieString">cookieString(req, opt)</h3><p>Creates a string for storing a cookie on the browser.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Request Object</td><td class="description"></td></tr><tr><td class="name">opt</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="cookies.setBrowserCookie">setBrowserCookie(req, opt)</h3><p>Sets a cookie on the browser, for use client-side only.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Request Object</td><td class="description"></td></tr><tr><td class="name">opt</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="cookies.setResponseCookie">setResponseCookie(req, res, opt)</h3><p>Creates a Set-Cookie header on a response object.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Request Object</td><td class="description"></td></tr><tr><td class="name">res</td><td class="type">Response Object</td><td class="description"></td></tr><tr><td class="name">opt</td><td class="type">Object</td><td class="description"></td></tr></table><h2 id="core">core</h2><p>The core module contains functions used by kanso to facilitate the running
of your app. You shouldn't need to use any of the functions here directly
unless you're messing with the internals of Kanso.</p><h3 id="core.rewriteGroups">rewriteGroups(pattern, url)</h3><p>Extracts groups from a url, eg:
'/some/path' with pattern '/some/:name' -> {name: 'path'}</p><h4>Parameters</h4><table class="params"><tr><td class="name">pattern</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">url</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Object</span></div><h3 id="core.rewriteSplat">rewriteSplat(pattern, url)</h3><p>Extracts a splat value from a rewrite pattern and matching URL.</p><h4>Parameters</h4><table class="params"><tr><td class="name">pattern</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">url</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="core.matchURL">matchURL(method, url)</h3><p>Attempts to match rewrite from patterns to a URL, returning the
matching rewrite object if successful.</p><h4>Parameters</h4><table class="params"><tr><td class="name">method</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">url</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Object</span></div><h3 id="core.replaceGroups">replaceGroups(val, groups, splat)</h3><p>Replace group names in a string with the value of that group
eg: "/:name" with groups {name: 'test'} -> "/test"</p><h4>Parameters</h4><table class="params"><tr><td class="name">val</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">groups</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">splat</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="core.createRequest">createRequest(method, url, data, match, callback)</h3><p>Creates a new request object from a url and matching rewrite object.
Query parameters are automatically populated from rewrite pattern.</p><h4>Parameters</h4><table class="params"><tr><td class="name">method</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">url</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">data</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">match</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="core.runShowBrowser">runShowBrowser(req, name, docid, callback)</h3><p>Fetches the relevant document and calls the named show function.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">docid</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="core.parseResponse">parseResponse(req, res)</h3><p>Helper for runShow/runList.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">res</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="core.runShow">runShow(fn, doc, req)</h3><p>Runs a show function with the given document and request object,
emitting relevant events. This function runs both server and client-side.</p><h4>Parameters</h4><table class="params"><tr><td class="name">fn</td><td class="type">Function</td><td class="description"></td></tr><tr><td class="name">doc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="core.runUpdateBrowser">runUpdateBrowser(req, name, docid, callback)</h3><p>Fetches the relevant document and calls the named update function.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">docid</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="core.runUpdate">runUpdate(fn, doc, req)</h3><p>Runs a update function with the given document and request object,
emitting relevant events. This function runs both server and client-side.</p><h4>Parameters</h4><table class="params"><tr><td class="name">fn</td><td class="type">Function</td><td class="description"></td></tr><tr><td class="name">doc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="core.createHead">createHead(data)</h3><p>Creates a fake head object from view results for passing to a list function
being run client-side.</p><h4>Parameters</h4><table class="params"><tr><td class="name">data</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Object</span></div><h3 id="core.runListBrowser">runListBrowser(req, name, view, callback)</h3><p>Fetches the relevant view and calls the named list function with the results.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">view</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="core.runList">runList(fn, head, req)</h3><p>Runs a list function with the given document and request object,
emitting relevant events. This function runs both server and client-side.</p><h4>Parameters</h4><table class="params"><tr><td class="name">fn</td><td class="type">Function</td><td class="description"></td></tr><tr><td class="name">head</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="core.handle">handle(method, url, data)</h3><p>Creates a request object for the url and runs appropriate show, list or
update functions.</p><h4>Parameters</h4><table class="params"><tr><td class="name">method</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">url</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">data</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="core.setURL">setURL(method, url, data)</h3><p>Add a history entry for the given url, prefixed with the baseURL for the app.</p><h4>Parameters</h4><table class="params"><tr><td class="name">method</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">url</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">data</td><td class="type">Object</td><td class="description">(optional)</td></tr></table><h3 id="core.getURL">getURL()</h3><p>Gets the current app-level URL (without baseURL prefix).</p><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="core.sameOrigin">sameOrigin(a, b)</h3><p>Tests is two urls are of the same origin. Accepts parsed url objects
or strings as arguments.</p><h4>Parameters</h4><table class="params"><tr><td class="name">a</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">b</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Boolean</span></div><h3 id="core.appPath">appPath(p)</h3><p>Converts a full url to an app-level url (without baseURL prefix).
example: {baseURL}/some/path -> /some/path</p><h4>Parameters</h4><table class="params"><tr><td class="name">p</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="core.isAppURL">isAppURL(url)</h3><p>Used to decide whether to handle a link or not. Should detect app vs.
external urls.</p><h4>Parameters</h4><table class="params"><tr><td class="name">url</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Boolean</span></div><h2 id="db">db</h2><p>Contains functions for querying and storing data in CouchDB.</p><h3 id="db.encode">encode(str)</h3><p>Encodes a document id or view, list or show name.</p><h4>Parameters</h4><table class="params"><tr><td class="name">str</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="db.request">request(options, callback)</h3><p>Make a request, with some default settings and proper callback
handling. Used behind-the-scenes by most other DB module functions.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.getRewrite">getRewrite(path, [q], callback)</h3><p>Fetches a rewrite from the database the app is running on. Results
are passed to the callback, with the first argument of the callback
reserved for any exceptions that occurred (node.js style).</p><h4>Parameters</h4><table class="params"><tr><td class="name">path</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">q</td><td class="type">Object</td><td class="description">(optional)</td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.getDoc">getDoc(id, [q, options], callback)</h3><p>Fetches a document from the database the app is running on. Results are
passed to the callback, with the first argument of the callback reserved
for any exceptions that occurred (node.js style).</p><h4>Parameters</h4><table class="params"><tr><td class="name">id</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">q</td><td class="type">Object</td><td class="description">(optional)</td></tr><tr><td class="name">options</td><td class="type">Object</td><td class="description">(optional)</td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.saveDoc">saveDoc(doc, [options], callback)</h3><p>Saves a document to the database the app is running on. Results are
passed to the callback, with the first argument of the callback reserved
for any exceptions that occurred (node.js style).</p><h4>Parameters</h4><table class="params"><tr><td class="name">doc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">options</td><td class="type">Object</td><td class="description">(optional)</td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.removeDoc">removeDoc(doc, [options], callback)</h3><p>Deletes a document from the database the app is running on. Results are
passed to the callback, with the first argument of the callback reserved
for any exceptions that occurred (node.js style).</p><h4>Parameters</h4><table class="params"><tr><td class="name">doc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.getView">getView(view, [q], callback)</h3><p>Fetches a view from the database the app is running on. Results are
passed to the callback, with the first argument of the callback reserved
for any exceptions that occurred (node.js style).</p><h4>Parameters</h4><table class="params"><tr><td class="name">view</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">q</td><td class="type">Object</td><td class="description">(optional)</td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.getList">getList(list, view, [q], callback)</h3><p>Transforms and fetches a view through a list from the database the app
is running on. Results are passed to the callback, with the first
argument of the callback reserved for any exceptions that occurred
(node.js style).</p><h4>Parameters</h4><table class="params"><tr><td class="name">list</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">view</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">q</td><td class="type">Object</td><td class="description">(optional)</td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.getShow">getShow(show, docid, [q], callback)</h3><p>Transforms and fetches a document through a show from the database the app
is running on. Results are passed to the callback, with the first
argument of the callback reserved for any exceptions that occurred
(node.js style).</p><h4>Parameters</h4><table class="params"><tr><td class="name">show</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">docid</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">q</td><td class="type">Object</td><td class="description">(optional)</td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.all">all([q], callback)</h3><p>Get all documents (including design docs).</p><h4>Parameters</h4><table class="params"><tr><td class="name">q</td><td class="type">Object</td><td class="description">(optional)</td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.stringifyQuery">stringifyQuery(query)</h3><p>Properly encodes query parameters to CouchDB views etc. Handle complex
keys and other non-string parameters by passing through JSON.stringify.
Returns a shallow-copied clone of the original query after complex values
have been stringified.</p><h4>Parameters</h4><table class="params"><tr><td class="name">query</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Object</span></div><h3 id="db.newUUID">newUUID(cacheNum, callback)</h3><p>Returns a new UUID generated by CouchDB. Its possible to cache
multiple UUIDs for later use, to avoid making too many requests.</p><h4>Parameters</h4><table class="params"><tr><td class="name">cacheNum</td><td class="type">Number</td><td class="description">(optional, default: 1)</td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.createDatabase">createDatabase(name, callback)</h3><p>Creates a CouchDB database.</p>

<p>If you're running behind a virtual host you'll need to set up
appropriate rewrites for a PUT request to '/' and turn off safe rewrites.</p><h4>Parameters</h4><table class="params"><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.deleteDatabase">deleteDatabase(name, callback)</h3><p>Deletes a CouchDB database.</p>

<p>If you're running behind a virtual host you'll need to set up
appropriate rewrites for a DELETE request to '/' and turn off safe rewrites.</p><h4>Parameters</h4><table class="params"><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.getReplication">getReplication(id, callback)</h3><p>Fetches the most recent revision of the replication document
referred to by the id parameter.</p>

<p>If you're running behind a virtual host you'll need to set up
appropriate rewrites to /_replicator, which will also mean turning
off safe rewrites.</p>

<p>This function only works with CouchDB >= 1.1, since it uses the
_replicator database.</p><h4>Parameters</h4><table class="params"><tr><td class="name">id</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.startReplication">startReplication(options, callback)</h3><p>Replicates options.source to options.target. The strings
options.source and options.target are each either a
CouchDB database name or a CouchDB database URI.</p>

<p>If you're running behind a virtual host you'll need to set up
appropriate rewrites to /_replicator, which will also mean turning
off safe rewrites.</p>

<p>This function only works with CouchDB >= 1.1, since it uses the
_replicator database.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.waitReplication">waitReplication(doc, [options, state_function], callback)</h3><p>Waits for a replication operation to enter a specific state.
waitReplication polls the _replication database using the
doc provided, and evaluates state_function(doc) at each iteration.
This function stops polling and invokes callback when the
state_function evaluates to true. If state_function is not
provided, waitReplication waits for the doc's _replication_state
to change from 'triggered' to 'completed' (or 'error').</p>

<p>If you're running behind a virtual host you'll need to set up
appropriate rewrites to /_replicator, which will also mean turning
off safe rewrites.</p>

<p>This function only works with CouchDB >= 1.1, since it uses the
_replicator database.</p><h4>Parameters</h4><table class="params"><tr><td class="name">doc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">state_function</td><td class="type">Function</td><td class="description">(optional)</td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.stopReplication">stopReplication(doc, callback, [options])</h3><p>Stops a replication operation already in progress.
The doc parameter can be obtained by calling getReplication.</p>

<p>If you're running behind a virtual host you'll need to set up
appropriate rewrites to /_replicator, which will also mean turning
off safe rewrites.</p>

<p>This function only works with CouchDB >= 1.1, since it uses the
_replicator database.</p><h4>Parameters</h4><table class="params"><tr><td class="name">id</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr><tr><td class="name">options</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.deleteUser">deleteUser(username, callback)</h3><p>Deletes an existing user document, given its username. You
must be logged in as an administrative user for this function
to succeed.</p><h4>Parameters</h4><table class="params"><tr><td class="name">username</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="db.getDesignDoc">getDesignDoc(name, callback, no_cache)</h3><p>Fetch a design document from CouchDB. By default, the
results of this function are cached within the javascript
engine. To avoid this, pass true for the no_cache argument.</p><h4>Parameters</h4><table class="params"><tr><td class="name">name</td><td class="type"></td><td class="description">The name of (i.e. path to) the design document.</td></tr><tr><td class="name">callback</td><td class="type"></td><td class="description">The callback to invoke when the request completes.</td></tr><tr><td class="name">no_cache</td><td class="type"></td><td class="description">optional; true to force a cache miss for this request.</td></tr></table><h2 id="events">events</h2><p>The events module handles events emitted by Kanso as well as custom
events defined by a Kanso app. These events can be used client-side
or server-side. Although you are limited to synchronous operation on
the server, so events are less likely to be useful there.</p><h3 id="events.on">on(name, listener)</h3><p>Adds a listener function for the given event name.</p><h4>Parameters</h4><table class="params"><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">listener</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="events.once">once(name, listener)</h3><p>Binds an event listener to the given event name, but unbinds it
after its first invocation.</p><h4>Parameters</h4><table class="params"><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">listener</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="events.emit">emit(name, [...])</h3><p>Triggers any event listeners bound to the given event name. Listeners
are called in the order they were bound. If a listener returns false
subsequent event listeners in the chain are not called.</p>

<p>The first argument is the event name to emit any additional arguments
are used as arguments to the bound event listeners.</p><h4>Parameters</h4><table class="params"><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">...</td><td class="type"></td><td class="description"></td></tr></table><h3 id="events.listeners">listeners(name)</h3><p>Returns an array of the bound event listeners for the given event name.
If no events are bound, an empty array is returned.</p><h4>Parameters</h4><table class="params"><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="events.removeAllListeners">removeAllListeners(name)</h3><p>Removes all bound event listeners for a given event name.</p><h4>Parameters</h4><table class="params"><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr></table><h3 id="events.removeListener">removeListener(name, listener)</h3><p>Removes a specific event listener for a given event name.</p><h4>Parameters</h4><table class="params"><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">listener</td><td class="type">Function</td><td class="description"></td></tr></table><h2 id="fields">fields</h2><p>The building blocks of Types and Forms, Fields help to validate and authorize
changes to docuemnt values.</p><h3 id="fields.Field">Field</h3><p>Field objects are used when constructing content types and forms.</p>

<h4>Options</h4>

<ul>
<li><strong>omit_empty</strong>  <em>Boolean</em> - whether to omit the field from a document when
                          the field is empty</li>
<li><strong>permissions</strong> <em>Object</em>  - a permissions check function or an object
                          containing separate functions to run on create,
                          edit and update operations.</li>
<li><strong>validators</strong>  <em>Array</em>   - an array of validation functions (default: [])</li>
<li><strong>required</strong>    <em>Boolean</em> - whether the field is required (default: true)</li>
</ul><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.Field.parse">Field.parse(raw)</h3><p>Parses a raw value returning the correct JavaScript type for this field.
This will usually be overridden by other field types.</p><h4>Parameters</h4><table class="params"><tr><td class="name">raw</td><td class="type"></td><td class="description"></td></tr></table><h3 id="fields.Field.isEmpty">Field.isEmpty(value, raw)</h3><p>Test values to see if field is considered empty.</p>

<p>This function accepts the raw value even though by default it only
checks the parsed value, so that other field types overridding this method
have the raw data available.</p><h4>Parameters</h4><table class="params"><tr><td class="name">value</td><td class="type"></td><td class="description">the parsed value for the field</td></tr><tr><td class="name">raw</td><td class="type"></td><td class="description">the raw value for this field</td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Boolean</span></div><h3 id="fields.Field.validate">Field.validate(doc, value, raw)</h3><p>Run the field's validation functions against a value. Returns an
array of validation errors, or an empty array if valid.</p><h4>Parameters</h4><table class="params"><tr><td class="name">doc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">value</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">raw</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="fields.Field.authorize">Field.authorize(newDoc, oldDoc, newVal, oldVal, userCtx)</h3><p>Check relevant field permissions to see if user is authorised to make
changes. Returns an array of permissions errors, or an empty array if the
changes are permissible.</p><h4>Parameters</h4><table class="params"><tr><td class="name">newDoc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">oldDoc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">newVal</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">oldVal</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">userCtx</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="fields.Embedded">Embedded</h3><p>Embedded objects represent a Type embedded within another Type or set of
Fields. Its not a true field, but like the Field constructor it acts as a
marker when walking through the sub-objects that make up a schema.</p>

<p>Exposes the same methods as Field objects.</p>

<h4>Options</h4>

<ul>
<li><strong>type</strong>        <em>Type Object</em>  - Required, the Type definition to embed</li>
<li><strong>omit_empty</strong>  <em>Boolean</em> - whether to omit the field from a document when
                          the field is empty</li>
<li><strong>permissions</strong> <em>Object</em>  - a permissions check function or an object
                          containing separate functions to run on create,
                          edit and update operations.</li>
<li><strong>validators</strong>  <em>Array</em>   - an array of validation functions (default: [])</li>
<li><strong>required</strong>    <em>Boolean</em> - whether the field is required (default: true)</li>
</ul><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.Embedded.isEmpty">Embedded.isEmpty(value, raw)</h3><p>Test values to see if field is considered empty.</p>

<p>This function accepts the raw value even though by default it only
checks the parsed value, so that other field types overridding this method
have the raw data available.</p><h4>Parameters</h4><table class="params"><tr><td class="name">value</td><td class="type"></td><td class="description">the parsed value for the field</td></tr><tr><td class="name">raw</td><td class="type"></td><td class="description">the raw value for this field</td></tr></table><h3 id="fields.Embedded.validate">Embedded.validate(doc, value, raw)</h3><p>Run the type's validate function against a value. Returns an
array of validation errors, or an empty array if valid.</p><h4>Parameters</h4><table class="params"><tr><td class="name">doc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">value</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">raw</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="fields.Embedded.authorize">Embedded.authorize(newDoc, oldDoc, newVal, oldVal, user)</h3><p>Check relevant type permissions to see if user is authorised to make
changes. Returns an array of permissions errors, or an empty array if the
changes are permissible.</p><h4>Parameters</h4><table class="params"><tr><td class="name">newDoc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">oldDoc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">newVal</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">oldVal</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">user</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="fields.EmbeddedList">EmbeddedList</h3><p>EmbeddedList objects represent multiple instances of a Type embedded within
another Type or set of Fields. Its not a true field, but like the Field
constructor it acts as a marker when walking through the sub-objects that
make up a schema.</p>

<p>Exposes the same methods as Field objects.</p>

<h4>Options</h4>

<ul>
<li><strong>type</strong>        <em>Type Object</em>  - Required, the Type definition to embed</li>
<li><strong>omit_empty</strong>  <em>Boolean</em> - whether to omit the field from a document when
                          the field is empty</li>
<li><strong>permissions</strong> <em>Object</em>  - a permissions check function or an object
                          containing separate functions to run on create,
                          edit and update operations.</li>
<li><strong>validators</strong>  <em>Array</em>   - an array of validation functions (default: [])</li>
<li><strong>required</strong>    <em>Boolean</em> - whether the field is required (default: true)</li>
</ul><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.EmbeddedList.isEmpty">EmbeddedList.isEmpty(value, raw)</h3><p>Test values to see if field is considered empty.</p>

<p>This function accepts the raw value even though by default it only
checks the parsed value, so that other field types overridding this method
have the raw data available.</p><h4>Parameters</h4><table class="params"><tr><td class="name">value</td><td class="type"></td><td class="description">the parsed value for the field</td></tr><tr><td class="name">raw</td><td class="type"></td><td class="description">the raw value for this field</td></tr></table><h3 id="fields.EmbeddedList.missingIDs">EmbeddedList.missingIDs(list)</h3><p>Detects embedded documents with missing _id properties and returns an
array of Error objects for each occurence. Returns an empty array if
all documents have a populated _id property.</p><h4>Parameters</h4><table class="params"><tr><td class="name">list</td><td class="type">Array</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="fields.EmbeddedList.duplicateIDs">EmbeddedList.duplicateIDs(list)</h3><p>Detects embedded documents with duplicate _id properties and returns an
array of Error objects for each occurence. Returns an empty array if
all documents have a unique _id property.</p><h4>Parameters</h4><table class="params"><tr><td class="name">list</td><td class="type">Array</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="fields.EmbeddedList.validate">EmbeddedList.validate(doc, value, raw)</h3><p>Checks for missing or duplicate _ids then runs the type's validate function
against each embedded document. Returns an array of validation errors, or
an empty array if valid.</p><h4>Parameters</h4><table class="params"><tr><td class="name">doc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">value</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">raw</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="fields.EmbeddedList.authorize">EmbeddedList.authorize(nDoc, oDoc, nVal, oVal, user)</h3><p>Check relevant type permissions to see if user is authorised to make
changes. Returns an array of permissions errors, or an empty array if the
changes are permissible.</p><h4>Parameters</h4><table class="params"><tr><td class="name">nDoc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">oDoc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">nVal</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">oVal</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">user</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="fields.string">string([options])</h3><p>Creates a new string Field</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.number">number([options])</h3><p>Creates a new number Field</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.boolean">boolean([options])</h3><p>Creates a new boolean Field</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.url">url([options])</h3><p>Creates a URL Field</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.email">email([options])</h3><p>Creates an email Field</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.creator">creator([options])</h3><p>Creates a creator Field</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.createdTime">createdTime([options])</h3><p>Creates a createdTime timestamp Field</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.choice">choice([options])</h3><p>Creates a choice Field</p>

<p>Required option: values - an array of possible choices, each an array
with the first item as the value and the second as its label.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.numberChoice">numberChoice([options])</h3><p>Creates a number choice Field</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.embed">embed([options])</h3><p>Creates an Embedded Field</p>

<p>Required option: type - the Type definition to embed</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.embedList">embedList([options])</h3><p>Creates an EmbeddedList Field</p>

<p>Required option: type - the Type definition to embed</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.array">array([options])</h3><p>Creates a array Field. The default parse function expects a single row of
comma separated values.</p>

<p>To accept an array of values other than strings, add a function to options
called parseEach which accepts the string value for each item and performs
the transformation.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="fields.numberArray">numberArray([options])</h3><p>Creates a number array Field, same as the array field only each value is
parsed as a number instead of a string.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h2 id="fieldset">fieldset</h2><p>Functions for dealing with collections of fields. Used by both the
types and forms modules.</p><h3 id="fieldset.createDefaults">createDefaults(fields, req)</h3><p>Returns a hierachy of default values for a given set of Field objects</p><h4>Parameters</h4><table class="params"><tr><td class="name">fields</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">req</td><td class="type">Object</td><td class="description">the request object to pass to default_value functions</td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Object</span></div><h3 id="fieldset.validateField">validateField(field, doc, value, raw, path)</h3><p>Validate a specific field, returning all validation errors as an array with
each error's field property prefixed by the current path.</p><h4>Parameters</h4><table class="params"><tr><td class="name">field</td><td class="type">Field</td><td class="description"></td></tr><tr><td class="name">doc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">value</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">raw</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">path</td><td class="type">Array</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="fieldset.validate">validate(fields, doc, values, raw, path, extra)</h3><p>Validates an object containing fields or other sub-objects, iterating over
each property and recursing through sub-objects to find all Fields.</p>

<p>Returns an array of validation errors, each with a field property set to the
path of the field which caused the error.</p><h4>Parameters</h4><table class="params"><tr><td class="name">fields</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">doc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">values</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">raw</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">path</td><td class="type">Array</td><td class="description"></td></tr><tr><td class="name">extra</td><td class="type">Boolean</td><td class="description">whether to allow extra values not covered by a field</td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="fieldset.authField">authField(f, nDoc, oDoc, nVal, oVal, user, path)</h3><p>Authorize a specific field, returning all permissions errors as an array with
each error's field property prefixed by the current path.</p><h4>Parameters</h4><table class="params"><tr><td class="name">f</td><td class="type">Field</td><td class="description">field object</td></tr><tr><td class="name">nDoc</td><td class="type">Object</td><td class="description">new document</td></tr><tr><td class="name">oDoc</td><td class="type">Object</td><td class="description">old document</td></tr><tr><td class="name">nVal</td><td class="type"></td><td class="description">new field value</td></tr><tr><td class="name">oVal</td><td class="type"></td><td class="description">old field value</td></tr><tr><td class="name">user</td><td class="type">Object</td><td class="description">user context object</td></tr><tr><td class="name">path</td><td class="type">Array</td><td class="description">current path</td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="fieldset.authFieldSet">authFieldSet(f, nDoc, oDoc, nVal, oVal, user, path)</h3><p>Authorizes an object containing fields or other sub-objects, iterating over
each property and recursing through sub-objects to find all Fields.</p>

<p>Returns an array of permissions errors, each with a field property set to the
path of the field which caused the error.</p><h4>Parameters</h4><table class="params"><tr><td class="name">f</td><td class="type">Field</td><td class="description">field object</td></tr><tr><td class="name">nDoc</td><td class="type">Object</td><td class="description">new document</td></tr><tr><td class="name">oDoc</td><td class="type">Object</td><td class="description">old document</td></tr><tr><td class="name">nVal</td><td class="type"></td><td class="description">new field value</td></tr><tr><td class="name">oVal</td><td class="type"></td><td class="description">old field value</td></tr><tr><td class="name">user</td><td class="type">Object</td><td class="description">user context object</td></tr><tr><td class="name">path</td><td class="type">Array</td><td class="description">current path</td></tr><tr><td class="name">extra</td><td class="type">Boolean</td><td class="description">whether to raise an error on additional fields</td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h2 id="flashmessages">flashmessages</h2><p>Flash messages help you store state between requests, such as reporting a
successful or failed operation after a redirect.</p>

<p>The flash message implementation in this module handles both fallback couchdb
mode, using cookies to persist state between requests, as well as supporting
client-side operation, correctly handling new messages even inside the
callbacks of async functions.</p>

<p>Flash messages only persist for the next request or the next template render!
That means 2 redirects without explicitly currying the flash messages will
cause the messages to be lost.</p><h3 id="flashmessages.readRequestCookie">readRequestCookie(req)</h3><p>Reads the flash messages cookie from a request object, returning an
array of incoming messages.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="flashmessages.readBrowserCookie">readBrowserCookie()</h3><p>Reads the flash messages cookie from the browser, returning an
array of incoming messages.</p><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="flashmessages.updateRequest">updateRequest(req)</h3><p>Adds a flash_messages property to a request containing all incoming
messages.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Request Object</span></div><h3 id="flashmessages.getMessages">getMessages(req)</h3><p>Get's all current flash messages, stopping them from being outgoing on the
next request so they're not repeated.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="flashmessages.getOutgoingMessages">getOutgoingMessages(req)</h3><p>Filters all available messages on a request object, returning only those
flagged as outgoing (sending in the response to be made available to the next
request).</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="flashmessages.updateResponse">updateResponse(req, res)</h3><p>Updates a response object after a list, show or update function has returned,
setting the flash messages cookie to include the outgoing messages.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">res</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Response Object</span></div><h3 id="flashmessages.createMessage">createMessage(req, msg)</h3><p>Creates a new flash message object, associating it with the given request.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">msg</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Object</span></div><h3 id="flashmessages.setBrowserCookie">setBrowserCookie(req, messages)</h3><p>Stores a list of messages in the flash messages cookie. This function is for
client-side use.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">messages</td><td class="type">Array</td><td class="description"></td></tr></table><h3 id="flashmessages.addMessage">addMessage(req, msg)</h3><p>Adds a new flash message for the current request. If the list, show or update
function has not returned, it's added to the response Set-Cookie header,
otherwise (if its the result of a client-side async operation) it's added
directly to the browsers cookies.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">msg</td><td class="type">String</td><td class="description"></td></tr></table><h2 id="forms">forms</h2><p>Functions for the rendering, parsing and validation of forms.</p><h3 id="forms.Form">Form(fields | type, [doc])</h3><p>Form object, presents fields and parses responses.</p>

<h4>Options</h4>

<table class="options">
  <tr>
     <td class="name">exclude</td>
     <td class="type">Array</td>
     <td class="description">a list of field names to exclude</td>
  </tr>
  <tr>
     <td class="name">fields</td>
     <td class="type">Array</td>
     <td class="description">
         a subset of fields to use (inverse of excluded)
     </td>
  </tr>
</table><h4>Parameters</h4><table class="params"><tr><td class="name">fields</td><td class="type">Object</td><td class="description">an object literal containing fields or a Type</td></tr><tr><td class="name">doc</td><td class="type">Object</td><td class="description">(optional) the original document being edited</td></tr><tr><td class="name">options</td><td class="type">Object</td><td class="description">(optional) see available options above</td></tr></table><h3 id="forms.override">override(excludes, field_subset, fields, doc_a, doc_b, path)</h3><p>Overrides values in doc_a with values in doc_b, only when a field is present
for that value. This means properties not in fields (or in excluded fields)
are retained, while properties which are covered by the fieldset are
replaced.</p>

<p>This is used when updating the form's values with a request when its been
initiated with a previous document. You shouldn't normally need to call this
directly.</p>

<p>Returns the updated doc_a object.</p><h4>Parameters</h4><table class="params"><tr><td class="name">excludes</td><td class="type">Array | null</td><td class="description"></td></tr><tr><td class="name">field_subset</td><td class="type">Array | null</td><td class="description"></td></tr><tr><td class="name">Fields</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">doc_a</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">doc_b</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">path</td><td class="type">Array</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Object</span></div><h3 id="forms.Form.validate">Form.validate(req)</h3><p>Parses a request and validates the result, binding values and errors to
the form instance.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Form</span></div><h3 id="forms.Form.isValid">Form.isValid()</h3><p>After a form has called validate, this function will return true if the form
is valid, false otherwise.</p><div class="returns"><strong>Returns: </strong><span class="type">Boolean</span></div><h3 id="forms.Form.toHTML">Form.toHTML(req, [RendererClass])</h3><p>Converts current form to a HTML string, using an optional renderer class.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description">Kanso request object; null for most recent. (optional),{Renderer} RendererClass (optional),{Object} options An object containing widget options, whichwill ultimately be provided to each widget's toHTML method.,{Boolean} create_defaults (optional) Set this to true if you'veprovided a document in {doc}, but would still like defaultvalues to be merged in to it via createDefaults. For a field f,the default value is added to {doc} if and only if doc[f]is undefined, null, or not present. Defaults to off.</td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="forms.Form.renderFields">Form.renderFields(renderer, fields, values, raw, err, path)</h3><p>Iterates over fields and sub-objects calling the correct renderer function on
each. Returns a HTML representation of the fields. Used internally by the
toHTML method, you should not need to call this function directly.</p><h4>Parameters</h4><table class="params"><tr><td class="name">renderer,{Object}</td><td class="type">Object</td><td class="description">fields,{Object} values,{Array} errs,{Array} path,{Object} options An object containing widget options, whichwill ultimately be provided to each widget's toHTML method.</td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="forms.formValuesToTree">formValuesToTree(form)</h3><p>Transforms a flat object from a request query to a proper
hierarchy of properties.</p>

<pre>{'one.two': 'val'} --> {one: {two: 'val'}}</pre><h4>Parameters</h4><table class="params"><tr><td class="name">query</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="forms.parseRaw">parseRaw(fields, raw)</h3><p>Transforms a raw query object from formValuesToTree to a
document which follows the schema for the given type.</p><h4>Parameters</h4><table class="params"><tr><td class="name">fields</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">raw</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Object</span></div><h2 id="path">path</h2><p>Path functions ported from node.js to work in CouchDB and the browser.
This module is used internally by Kanso, although you can use it in your
apps too if you find the functions useful.</p><h3 id="path.join">join(path, [...])</h3><p>Joins multiple paths together using '/'. Accepts a arbitrary number of
strings as arguments, returning the joined result as a single string.</p><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="path.normalizeArray">normalizeArray(parts, [keepBlanks])</h3><p>Normalizes a path split into an array, taking care of '..' and '.' parts.</p><h4>Parameters</h4><table class="params"><tr><td class="name">parts</td><td class="type">Array</td><td class="description"></td></tr><tr><td class="name">keepBlanks</td><td class="type">Boolean</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="path.normalize">normalize(path, [keepBlanks])</h3><p>Normalize a string path, taking care of '..' and '.' parts.</p><h4>Parameters</h4><table class="params"><tr><td class="name">path</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">keepBlanks</td><td class="type">Boolean</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">string</span></div><h3 id="path.dirname">dirname(path)</h3><p>Return the directory name of a path. Similar to the Unix dirname command.</p><h4>Parameters</h4><table class="params"><tr><td class="name">path</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="path.basename">basename(path, ext)</h3><p>Return the last portion of a path. Similar to the Unix basename command.</p>

<p><strong>Example</strong></p>

<pre><code class="javascript">path.basename('/foo/bar/baz/asdf/quux.html')
// returns
'quux.html'

path.basename('/foo/bar/baz/asdf/quux.html', '.html')
// returns
'quux'
</code></pre><h4>Parameters</h4><table class="params"><tr><td class="name">path</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">ext</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="path.extname">extname(path)</h3><p>Return the extension of the path. Everything after the last '.' in the last
portion of the path. If there is no '.' in the last portion of the path or
the only '.' is the first character, then it returns an empty string.</p>

<pre><code class="javascript">path.extname('index.html')
// returns
'.html'

path.extname('index')
// returns
''
</code></pre><h4>Parameters</h4><table class="params"><tr><td class="name">path</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h2 id="permissions">permissions</h2><p>Permissions functions are used on both Fields and Types to check a given
user is authorized to make a change to a document.</p><h3 id="permissions.matchUsername">matchUsername()</h3><p>Field's new value should match current user's name</p><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="permissions.hasRole">hasRole(role)</h3><p>Checks if the user has a specific role</p><h4>Parameters</h4><table class="params"><tr><td class="name">role</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="permissions.fieldUneditable">fieldUneditable()</h3><p>The value of this field should never change after the document has been
created.</p><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="permissions.usernameMatchesField">usernameMatchesField(path)</h3><p>User's name should match the <em>old</em> value of the given field. A field can be
specified using a string or an array of strings (like a path).</p>

<pre>
eg: usernameMatchesField('creator')
    usernameMatchesField(['meta','creator'])

    {
        creator: 'name',
        meta: {creator: 'name2'}
    }
</pre><h4>Parameters</h4><table class="params"><tr><td class="name">path</td><td class="type">String | Array</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="permissions.loggedIn">loggedIn()</h3><p>Checks that user's context has a username</p><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="permissions.all">all(perms)</h3><p>Runs an array of permissions functions and checks that all of them pass,
returning all failures.</p><h4>Parameters</h4><table class="params"><tr><td class="name">perms</td><td class="type">Array</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="permissions.any">any(perms)</h3><p>Tests to see if any one permission function passes, returning on the
first success. If all permissions fail, then all errors are returned.</p><h4>Parameters</h4><table class="params"><tr><td class="name">perms</td><td class="type">Array</td><td class="description"></td></tr></table><h3 id="permissions.inherit">inherit(type)</h3><p>Treat new and old values like new documents of a given type, and attempt to
authorize the value against the type's permissions. Useful when handling
permissions for an embedded type.</p>

<p>Can be combined with permissions.any or permissions.all to extend the
permissions for an embedded type field. For example, the following might
allow both the owner of the parent document and the owner of the comment
itself to remove it.</p>

<pre><code class="javascript">
    comment: fields.embed({
        type: types.comment,
        permissions: {
            remove: permissions.any([
                permissions.usernameMatchesField('creator'),
                permissions.inherit(types.comment)
            ])
        }
    });
</code></pre><h4>Parameters</h4><table class="params"><tr><td class="name">type</td><td class="type">Type</td><td class="description"></td></tr></table><h2 id="querystring">querystring</h2><p>Querystring functions ported from node.js to work in CouchDB and the browser.
This module is used internally by Kanso, although you can use it in your
apps too if you find the functions useful.</p><h3 id="querystring.unescape">unescape(str)</h3><p>Decodes a URI Component, provided so that it could be overridden if
necessary.</p><h4>Parameters</h4><table class="params"><tr><td class="name">str</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="querystring.escape">escape(str)</h3><p>Encodes a URI Component, provided so that it could be overridden if
necessary.</p><h4>Parameters</h4><table class="params"><tr><td class="name">str</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="querystring.stringify">stringify(obj, [sep, eq, name])</h3><p>Serialize an object to a query string. Optionally override the default
separator and assignment characters.</p>

<p><strong>Example:</strong></p>

<pre><code class="javascript">
querystring.stringify({foo: 'bar'})
// returns
'foo=bar'

querystring.stringify({foo: 'bar', baz: 'bob'}, ';', ':')
// returns
'foo:bar;baz:bob'
</code></pre><h4>Parameters</h4><table class="params"><tr><td class="name">obj</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">sep</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">eq</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="querystring.decode">decode(qs, [sep, eq])</h3><p>Deserialize a query string to an object. Optionally override the default
separator and assignment characters.</p>

<p><strong>Example:</strong></p>

<pre><code class="javascript">
querystring.parse('a=b&b=c')
// returns
// { a: 'b', b: 'c' }
</code></pre><h4>Parameters</h4><table class="params"><tr><td class="name">qs</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">sep</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">eq</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Object</span></div><h2 id="render">render</h2><p>Renderer constructors and general utilities for rendering Form objects
as HTML.</p><h3 id="render.errorHTML">errorHTML(errors)</h3><p>Renders HTML for error messages.</p><h4>Parameters</h4><table class="params"><tr><td class="name">errors</td><td class="type">Array</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="render.labelText">labelText(field, name)</h3><p>Generates the text for a field's label, depending on whether
a custom label is defined or not. If not, the name is captialized and
underscores are replaces with spaces to produce the label's text.</p><h4>Parameters</h4><table class="params"><tr><td class="name">field</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="render.labelHTML">labelHTML(field, name, id)</h3><p>Generates HTML for label tags.</p><h4>Parameters</h4><table class="params"><tr><td class="name">field</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">id</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="render.descriptionHTML">descriptionHTML(obj)</h3><p>Generates HTML for field descriptions (if defined).</p><h4>Parameters</h4><table class="params"><tr><td class="name">obj</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="render.hintHTML">hintHTML(obj)</h3><p>Generates HTML for field hints (if defined).</p><h4>Parameters</h4><table class="params"><tr><td class="name">obj</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="render.classes">classes(field, errors)</h3><p>Creates an array of default class names for a field. This includes
'required' for required fields and 'error' for fields failing validation.</p>

<p>All fields are given a 'field' class.</p><h4>Parameters</h4><table class="params"><tr><td class="name">field</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">errors</td><td class="type">Array</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="render.defaultRenderer">defaultRenderer()</h3><p>Determines the default renderer class, to be used globally by
instances of forms.Form that fail to specify a renderer class.</p><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="render.table">table</h3><p>The default table renderer class, passed to the toHTML method of a
form. Renders a form using a single table, with <tbody> tags to
represent nested field groups. The <tbody>s are labelled with
specific CSS classes, including depth information. See style.css
for details on how to style this output.</p><h2 id="sanitize">sanitize</h2><p>Input sanitization, escaping, and construction functions
covering security-sensitive areas.</p><h3 id="sanitize.escapeHtml">escapeHtml(s)</h3><p>Encodes required characters as HTML entities so a string
can be included in a page. This function must be used to
avoid Cross-site Scripting attacks.</p><h4>Parameters</h4><table class="params"><tr><td class="name">s</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="sanitize.escapeJavascriptString">escapeJavascriptString(s)</h3><p>Encodes selected characters in a string, so that the string
can be safely used within a Javascript string constant. This
function must be used to avoid cross-site scripting attacks
(or, in some cases, arbitrary server-side code execution).</p><h4>Parameters</h4><table class="params"><tr><td class="name">s</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="sanitize.escapeXmlCharacterData">escapeXmlCharacterData(s)</h3><p>Encodes selected characters in a string, so that the string
can be safely used within an XML character data section.
This function must be used to avoid cross-site scripting attacks.</p><h4>Parameters</h4><table class="params"><tr><td class="name">s</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="sanitize.generateDomIdentifier">generateDomIdentifier(s)</h3><p>Takes any number of arguments, and combines them together
to safely form a string that's suitable for use as a DOM
element identifier.</p><h4>Parameters</h4><table class="params"><tr><td class="name">s</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="sanitize.generateDomName">generateDomName(s)</h3><p>Takes any number of arguments, and combines them together
to safely form a string that's suitable for use in a DOM
element's name attribute.</p><h4>Parameters</h4><table class="params"><tr><td class="name">s</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h2 id="session">session</h2><p>Functions related to the management of user sessions and account information.</p><h3 id="session.fakeRequest">fakeRequest(userCtx, callback)</h3><p>Creates a fake request to /_session to pass to sessionChange, useful
when using functions such as templates.render</p><h4>Parameters</h4><table class="params"><tr><td class="name">userCtx</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="session.sessionChange">sessionChange(userCtx, callback)</h3><p>Calls sessionChange if exported from the currently loaded app.</p><h4>Parameters</h4><table class="params"><tr><td class="name">userCtx</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="session.logout">logout(callback)</h3><p>Logs out the current user.</p><h4>Parameters</h4><table class="params"><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="session.login">login(username, password, callback)</h3><p>Attempt to login using the username and password provided.</p><h4>Parameters</h4><table class="params"><tr><td class="name">username</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">password</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="session.info">info(callback)</h3><p>Returns the current user's session information.</p><h4>Parameters</h4><table class="params"><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="session.userDb">userDb(callback)</h3><p>Returns the authentication database for the current user's session.</p><h4>Parameters</h4><table class="params"><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="session.signup">signup(username, password, callback)</h3><p>Creates a new user document with given username and password.</p><h4>Parameters</h4><table class="params"><tr><td class="name">username</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">password</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h2 id="settings">settings</h2><p>The settings module is automatically generated by Kanso and contains the
settings defined in your app's kanso.json configuration file.</p><h2 id="sha1">sha1</h2><p>A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined
in FIPS PUB 180-1. This module is used to hash user passwords in a way that's
compatible with CouchDB.</p>

<p>This module is Copyright Paul Johnston 2000 - 2002 and distributed under the
BSD License. See http://pajhome.org.uk/crypt/md5 for details.</p><h3 id="sha1.hex">hex(s)</h3><p>Hashes a string using SHA1 and returns a hex representation of it.</p><h4>Parameters</h4><table class="params"><tr><td class="name">s</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="sha1.base64">base64(s)</h3><p>Hashes a string using SHA1 and returns a base64 representation of it.</p><h4>Parameters</h4><table class="params"><tr><td class="name">s</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="sha1.str">str(s)</h3><p>Hashes a string using SHA1 and returns a string representation of it.</p><h4>Parameters</h4><table class="params"><tr><td class="name">s</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="sha1.hex_hmac">hex_hmac(key, data)</h3><p>Calculates the HMAC-SHA1 of a key and some data, returning a hex
representation of it.</p><h4>Parameters</h4><table class="params"><tr><td class="name">key</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">data</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="sha1.base64_hmac">base64_hmac(key, data)</h3><p>Calculates the HMAC-SHA1 of a key and some data, returning a base64
representation of it.</p><h4>Parameters</h4><table class="params"><tr><td class="name">key</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">data</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="sha1.str_hmac">str_hmac(key, data)</h3><p>Calculates the HMAC-SHA1 of a key and some data, returning a string
representation of it.</p><h4>Parameters</h4><table class="params"><tr><td class="name">key</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">data</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h2 id="templates">templates</h2><p>Kanso uses Dust templates for rendering pages.
To learn more about the syntax, see the
<a href="http://akdubya.github.com/dustjs/">Dust site</a>.</p>

<p>Since Dust stores compiled templates on the module itself, the
templates module does some interesting things to work around the lack
of a module cache in CouchDB. Because of this, compiled templates are
automatically added to this module from your templates folder each time
your app is pushed to CouchDB. You can see a list of the loaded template
names on the 'loaded' property of this module.</p><h3 id="templates.render">render(name, req, context)</h3><p>Synchronously render dust template and return result, automatically adding
baseURL to the template's context. The request object is required so we
can determine the value of baseURL.</p><h4>Parameters</h4><table class="params"><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">context</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h2 id="types">types</h2><p>Document types can be used to ease the validation of updates and check
permissions when creating, editing or deleting documents.</p><h3 id="types.Type">Type(name, options)</h3><p>Creates a new Type object</p>

<h4>Options</h4>

<ul>
<li><strong>fields</strong>       <em>Object</em> - Field objects to use as the Types's schema</li>
<li><strong>permissions</strong>  <em>Object</em> - a permissions check function or an object
               containing separate functions to run on add, remove
               and update operations.</li>
<li><strong>display_name</strong> <em>Function|String|Array</em> - name to be used when displaying
               the document in the admin tool. A string or array
               will become the property to display. A function
               should take the document as a object and return
               the display name.</li>
</ul><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="types.Type.validate">Type.validate(doc, rawDoc)</h3><p>Run field validators against document and check for missing required
fields or extra fields when the Types's allow_extra_fields property is
set to false.</p><h4>Parameters</h4><table class="params"><tr><td class="name">doc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">rawDoc</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="types.Type.authorize">Type.authorize(nDoc, oDoc, user)</h3><p>Run field permissions checks against userCtx and document.</p><h4>Parameters</h4><table class="params"><tr><td class="name">nDoc</td><td class="type">Object</td><td class="description">new document</td></tr><tr><td class="name">oDoc</td><td class="type">Object</td><td class="description">old document</td></tr><tr><td class="name">userCtx</td><td class="type">Object</td><td class="description">user context object</td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="types.Type.authorizeTypeLevel">Type.authorizeTypeLevel(nDoc, oDoc, user)</h3><p>Runs top type-level permissions checks only.</p><h4>Parameters</h4><table class="params"><tr><td class="name">nDoc</td><td class="type">Object</td><td class="description">new document</td></tr><tr><td class="name">oDoc</td><td class="type">Object</td><td class="description">old document</td></tr><tr><td class="name">userCtx</td><td class="type">Object</td><td class="description">user context object</td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="types.Type.create">Type.create(userCtx, callback)</h3><p>Create's a new object for this Type. Pre-filling any default values and
providing a new _id value. This is a convenient function to use when creating
a type to embed within another.</p><h4>Parameters</h4><table class="params"><tr><td class="name">userCtx</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">callback</td><td class="type">Function</td><td class="description"></td></tr></table><h3 id="types.validate_doc_update">validate_doc_update(types, newDoc, oldDoc, userCtx)</h3><p>Calls validation and permissions functions relevant to a document update.
This should be called from your app's exported validate_doc_update function
if you wish to use kanso Types in you project.</p>

<p>Throws on error.</p><h4>Parameters</h4><table class="params"><tr><td class="name">types</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">newDoc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">oldDoc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">userCtx</td><td class="type">Object</td><td class="description"></td></tr></table><h2 id="underscore">underscore</h2><p>Used by Kanso internally, the excellent Underscore.js library is also
included in the standard set of CommonJS modules pushed with your app.</p>

<p>For more information on the Underscore.js API, see the website:
http://documentcloud.github.com/underscore/</p><h2 id="url">url</h2><p>URL functions ported from node.js to work in CouchDB and the browser.
This module is used internally by Kanso, although you can use it in your
apps too if you find the functions useful.</p><h3 id="url.parse">parse(url, [parseQueryString, slashesDenoteHost])</h3><p>Take a URL string, and return an object. Pass true as the second argument
to also parse the query string using the querystring module.</p><h4>Parameters</h4><table class="params"><tr><td class="name">url</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">parseQueryString</td><td class="type">Boolean</td><td class="description"></td></tr><tr><td class="name">slashesDenoteHost</td><td class="type">Boolean</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Object</span></div><h3 id="url.format">format(obj)</h3><p>Take a parsed URL object, and return a formatted URL string.</p><h4>Parameters</h4><table class="params"><tr><td class="name">obj</td><td class="type">Object</td><td class="description"></td></tr></table><h3 id="url.resolve">resolve(source, relative)</h3><p>Take a base URL, and a href URL, and resolve them as a browser would for
an anchor tag.</p><h4>Parameters</h4><table class="params"><tr><td class="name">source</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">relative</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h2 id="utils">utils</h2><p>General utility functions used by Kanso. Some functions were moved here from
other modules (such as core), to avoid a circular dependency bug in CouchDB.</p>

<p>This module also stores some useful properties such as 'isBrowser', which is
true if the code is running in a browser environment, and 'initial_hit' which
is set to true when a page is first requested from CouchDB (and set to false
for subsequent requests).</p><h3 id="utils.getBaseURL">getBaseURL(req)</h3><p>Returns the path to prefix to any URLs. When running behind a
virtual host, there is nothing to prefix URLs with. When accessing the
app directly, URLs need to be prefixed with /db/_design/appname/_rewrite.</p>

<p>The request object argument is only required when run server-side, but its
a good idea to include it whenever you call getBaseURL.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="utils.getPropertyPath">getPropertyPath(obj, path)</h3><p>Traverses an object and its sub-objects using an array of property names.
Returns the value of the matched path, or undefined if the property does not
exist.</p>

<p>If a string if used for the path, it is assumed to be a path with a single
key (the given string).</p>

<pre>
getPropertyPath({a: {b: 'foo'}}, ['a','b']) -> 'foo'
getPropertyPath({a: {b: 'foo'}}, 'a') -> {b: 'foo'}
</pre><h4>Parameters</h4><table class="params"><tr><td class="name">obj</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">path</td><td class="type">Array|String</td><td class="description"></td></tr></table><h3 id="utils.setPropertyPath">setPropertyPath(obj, path, val)</h3><p>Traverses an object and its sub-objects using an array of property names.
Sets the value of the matched property.</p>

<p>If a string if used for the path, it is assumed to be a path with a single
key (the given string).</p>

<pre>
setPropertyPath({}, ['a','b'], 'foo') -> {a: {b: 'foo'}}
setPropertyPath({}, 'a', 'foo') -> {a: 'foo'}
</pre><h4>Parameters</h4><table class="params"><tr><td class="name">obj</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">path</td><td class="type">Array|String</td><td class="description"></td></tr></table><h3 id="utils.escapeHTML">escapeHTML(s)</h3><p>Encodes required characters as HTML entities so a string can be included
in a page.</p><h4>Parameters</h4><table class="params"><tr><td class="name">s</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="utils.parseCSV">parseCSV(csvString)</h3><p>Parse CSV strings into an array of rows, each row an array of values.
Used by the array field's default CSV widget.</p><h4>Parameters</h4><table class="params"><tr><td class="name">csvString</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="utils.redirect">redirect(req, url)</h3><p>Creates CouchDB response object for returning from a show, list or update
function, which redirects to the given app url (automatically prepending the
baseURL)</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">url</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Object</span></div><h3 id="utils.isSubPath">isSubPath(a, b)</h3><p>Tests if path b is equal to or a sub-path of a.</p><h4>Parameters</h4><table class="params"><tr><td class="name">a</td><td class="type">Array</td><td class="description"></td></tr><tr><td class="name">b</td><td class="type">Array</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Boolean</span></div><h3 id="utils.titleize">titleize(str)</h3><p>Return a title-case version of the supplied string.</p><h4>Parameters</h4><table class="params"><tr><td class="name">str</td><td class="type"></td><td class="description">The string to transform.</td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="utils.bindContext">bindContext(context, closure)</h3><p>Returns a function that executes {closure} in the context of {context}.
Use this function if you'd like to preserve the current context
across callbacks, event handlers, and other cases where the value of
{this} is set for you.</p><h4>Parameters</h4><table class="params"><tr><td class="name">context</td><td class="type">Object</td><td class="description">The context to use when executing closure.Usually, you will specify the current value of 'this'.</td></tr><tr><td class="name">closure</td><td class="type">Function</td><td class="description">The function to to bind to {context}.</td></tr></table><h2 id="validators">validators</h2><p>Validation functions used to validate Field contents.</p><h3 id="validators.min">min(min)</h3><p>Tests that the field's value is greater than 'min'.</p><h4>Parameters</h4><table class="params"><tr><td class="name">min</td><td class="type">Number</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="validators.max">max(max)</h3><p>Tests that the field's value is less than 'max'</p><h4>Parameters</h4><table class="params"><tr><td class="name">max</td><td class="type">Number</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="validators.range">range(min, max)</h3><p>Tests that the field's value is greater than 'min' AND less than 'max'</p><h4>Parameters</h4><table class="params"><tr><td class="name">min</td><td class="type">Number</td><td class="description"></td></tr><tr><td class="name">max</td><td class="type">Number</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="validators.minlength">minlength(val)</h3><p>Tests that the field's value length is greater than 'val'</p><h4>Parameters</h4><table class="params"><tr><td class="name">val</td><td class="type">Number</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="validators.maxlength">maxlength(val)</h3><p>Tests that the field's value length is less than 'val'</p><h4>Parameters</h4><table class="params"><tr><td class="name">val</td><td class="type">Number</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="validators.rangelength">rangelength(min, max)</h3><p>Tests that the field's value length is greater than 'min' AND less than 'max'</p><h4>Parameters</h4><table class="params"><tr><td class="name">min</td><td class="type">Number</td><td class="description"></td></tr><tr><td class="name">max</td><td class="type">Number</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="validators.regexp">regexp(re, message)</h3><p>Tests field's value against a regular expression</p><h4>Parameters</h4><table class="params"><tr><td class="name">re</td><td class="type">RegExp</td><td class="description">can be a string or RegExp object</td></tr><tr><td class="name">message</td><td class="type">String</td><td class="description">(optional) a custom error message to throw</td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="validators.email">email()</h3><p>Tests that field's value is a valid email address using a regular expression.</p><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="validators.url">url()</h3><p>Tests that field's value is a valid URL using a regular expression.</p><div class="returns"><strong>Returns: </strong><span class="type">Function</span></div><h3 id="validators.missingIDs">missingIDs()</h3><p>Detects embedded documents with missing _id properties and returns an
array of Error objects for each occurence. Returns an empty array if
all documents have a populated _id property.</p>

<p>Used by the EmbeddedList field type.</p><h4>Parameters</h4><table class="params"><tr><td class="name">doc</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">value</td><td class="type">Array</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h2 id="widgets">widgets</h2><p>Widgets define the way a Field object is displayed when rendered as part of a
Form. Changing a Field's widget will be reflected in the admin app.</p><h3 id="widgets.Widget">Widget(type, [options])</h3><p>Widget constructor, creates a new Widget object.</p><h4>Parameters</h4><table class="params"><tr><td class="name">type</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">options</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Widget Object</span></div><h3 id="widgets.Widget.toHTML">Widget.toHTML(name, value, raw, field, options)</h3><p>Converts a widget to HTML using the provided name and parsed and raw values</p><h4>Parameters</h4><table class="params"><tr><td class="name">name</td><td class="type">String</td><td class="description"></td></tr><tr><td class="name">value</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">raw</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">field</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">options</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="widgets.Widget.clientInit">Widget.clientInit(path, value, raw, field, options)</h3><p>Initializes a widget on the client-side only, using the browser's
script interpreter. This function is guaranteed to be called
after toHTML, and any DOM elements created by toHTML are
guaranteed to be accessible</p><h4>Parameters</h4><table class="params"><tr><td class="name">path</td><td class="type">Array</td><td class="description"></td></tr><tr><td class="name">value</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">raw</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">field</td><td class="type"></td><td class="description"></td></tr><tr><td class="name">options</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Boolean</span></div><h3 id="widgets.Widget.updateName">Widget.updateName(path)</h3><p>Called by Kanso when it becomes necessary to rename this widget
instance. The widget should respond by updating the id and name
attributes.</p><h4>Parameters</h4><table class="params"><tr><td class="name">elt</td><td class="type">String</td><td class="description">An element that contains one ormore instances of the widget referenced by `this'.,{String} path The widget's new path; combine this usingthe _name or _id function to generate a usable string.,{Object} options A new set of toHTML/clientInit options.This may or may not influence the widget's name.</td></tr></table><h3 id="widgets.Widget.updateValue">Widget.updateValue(elt, path, value, options)</h3><p>Called by Kanso when it becomes necessary to rename this widget
instance. The widget should respond by updating the value attribute.</p><h4>Parameters</h4><table class="params"><tr><td class="name">elt</td><td class="type">String</td><td class="description">An element that contains one ormore instances of the widget referenced by `this'.</td></tr><tr><td class="name">path</td><td class="type">String</td><td class="description">The path to the widget.</td></tr><tr><td class="name">value</td><td class="type">Object</td><td class="description">The new value for the widget, unencoded.</td></tr><tr><td class="name">options</td><td class="type">Object</td><td class="description">An up-to-date set of toHTML/clientInit options.</td></tr></table><h3 id="widgets.Widget.getValue">Widget.getValue(elt, path, options)</h3><p>Called by Kanso when it becomes necessary to interrogate this
widget to determine its value. The widget should respond by
returning an unencoded value (typically as an object).</p><h4>Parameters</h4><table class="params"><tr><td class="name">elt</td><td class="type">String</td><td class="description">An element that contains one ormore instances of the widget referenced by `this'.</td></tr><tr><td class="name">path</td><td class="type">String</td><td class="description">The path to the widget.</td></tr><tr><td class="name">options</td><td class="type">Object</td><td class="description">An up-to-date set of toHTML/clientInit options.</td></tr></table><h3 id="widgets.Widget.validate">Widget.validate(elt, path, options)</h3><p>Called by Kanso when it becomes necessary to validate the
contents of this widget -- i.e. to ensure it's in a consistent
state before using its value or proceeding. Most widgets will
not implement this method; its primary use is complex widgets
that host validation-enabled forms and/or types. Returns true
if the contents is consistent and valid; false otherwise.</p><h4>Parameters</h4><table class="params"><tr><td class="name">elt</td><td class="type">String</td><td class="description">An element that contains one ormore instances of the widget referenced by `this'.</td></tr><tr><td class="name">path</td><td class="type">String</td><td class="description">The path to the widget.</td></tr><tr><td class="name">options</td><td class="type">Object</td><td class="description">An up-to-date set of toHTML/clientInit options.</td></tr></table><h3 id="widgets.text">text([options])</h3><p>Creates a new text input widget.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Widget Object</span></div><h3 id="widgets.password">password([options])</h3><p>Creates a new password input widget.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Widget Object</span></div><h3 id="widgets.hidden">hidden([options])</h3><p>Creates a new hidden input widget.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Widget Object</span></div><h3 id="widgets.textarea">textarea([options])</h3><p>Creates a new textarea widget.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Widget Object</span></div><h3 id="widgets.checkbox">checkbox([options])</h3><p>Creates a new checkbox widget.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Widget Object</span></div><h3 id="widgets.select">select([options])</h3><p>Creates a new select widget.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Widget Object</span></div><h3 id="widgets.computed">computed([options])</h3><p>Creates a new computed widget. Computed widgets display a string, but are
uneditable, working as a hidden field behind the scenes.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Widget Object</span></div><h3 id="widgets.creator">creator([options])</h3><p>Creates a new computed input widget which sets the value of the field to
the current user on new documents, responding to sessionChange events</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Widget Object</span></div><h3 id="widgets.embedded">embedded([options])</h3><p>Creates a new field for storing/displaying an embedded object.
This is automatically added to embed and embedList field types
that don't specify a widget.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Widget Object</span></div><h3 id="widgets.defaultEmbedded">defaultEmbedded([options])</h3><p>Creates a new field for storing/displaying an embedded object.
This is automatically added to embed and embedList field types
that don't specify a widget.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Widget Object</span></div><h3 id="widgets.embedForm">embedForm([options])</h3><p>Creates a new instance of an embedded <em>form</em> for the specified type.
This is the basis for the presentation of complex data types in Kanso,
and is used within an embedList to add and/or edit items.</p><h4>Parameters</h4><table class="params"><tr><td class="name">options</td><td class="type"></td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Widget Object</span></div>
    </div>

    <script src="http://yandex.st/highlightjs/5.16/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20477836-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </body>
</html>
